---
// LanguageSelector.astro - Client-side island for i18n
---

<div class="language-island" id="language-island">
  <label for="language-select-island" class="visually-hidden">Select language</label>
  <select id="language-select-island" aria-label="Select language" data-current-text="EN">
    <option value="en" data-flag="ðŸ‡ºðŸ‡¸" data-text="EN">ðŸ‡ºðŸ‡¸</option>
    <option value="es" data-flag="ðŸ‡¨ðŸ‡·" data-text="ES">ðŸ‡¨ðŸ‡·</option>
  </select>
</div>

<script>
  // This script runs on the client side with partial hydration
  // @ts-ignore - module loaded at runtime from public directory
  import { I18n } from '/assets/js/core/i18n.js';
  
  // Initialize i18n system
  let i18n: any = null;
  
  async function initLanguageSelector() {
    try {
      i18n = new I18n();
      await i18n.init();
      console.log('i18n initialized');
    } catch (error) {
      console.error('Failed to initialize i18n:', error);
    }
  }
  
  // Initialize on DOMContentLoaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initLanguageSelector);
  } else {
    initLanguageSelector();
  }
</script>
